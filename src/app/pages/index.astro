---
import Layout from '@/app/layouts/Layout.astro';
import DocContent from '@/features/docs/components/DocContent';
import fs from 'node:fs';
import path from 'node:path';

const welcomeDocPath = path.join(process.cwd(), 'public/data/docs/welcome.json');

let welcomeDoc = null;
if (fs.existsSync(welcomeDocPath)) {
  welcomeDoc = JSON.parse(fs.readFileSync(welcomeDocPath, 'utf-8'));
}

const title = welcomeDoc?.title || 'Hub - Opensophy';
const description = welcomeDoc?.description || 'Hub проекта Opensophy. Новости, блоги, документация и статьи по искусственному интеллекту, кибербезопасности, уязвимостям и технологиям.';
const keywords = welcomeDoc?.keywords || 'Opensophy, документация, искусственный интеллект, кибербезопасность, ИИ, AI, security, статьи, блог, новости';
---

<Layout
  title={title}
  description={description}
  url="/"
  type="website"
  keywords={keywords}
  robots="index, follow"
>
  {welcomeDoc ? (
    <DocContent client:only="react" doc={welcomeDoc} />
  ) : (
    <div style="min-height: 100vh; display: flex; align-items: center; justify-content: center;">
      <p>Загрузка...</p>
    </div>
  )}
</Layout>
